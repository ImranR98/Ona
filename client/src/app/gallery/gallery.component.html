<div fxLayout="column" style="height: 100%;">
    <div fxLayout="column" fxLayoutGap="1em" fxLayoutAlign="space-between start"
        class="stdMarginTop stdMarginHorizontal">
        <div fxLayout="column" fxLayoutGap="0.3em">
            <span class="xLargeText">{{collection}}</span>
            <span *ngIf="listSource.value.length == 0">No Items here. There may be no valid items in the
                folder, or
                folder scanning may still be in progress.</span>
        </div>
        <form [formGroup]="sortForm" fxLayout="row" *ngIf="thumbnails.length > 0">
            <mat-form-field fxFlex="100%">
                <mat-label>Sort</mat-label>
                <mat-select formControlName="sort" [value]="0">
                    <mat-option *ngFor="let sort of sorts; let i = index" value="{{i}}">{{sort}}</mat-option>
                </mat-select>
            </mat-form-field>
        </form>
    </div>
    <div fxLayout="column" fxLayoutGap="1em" *ngIf="!loading && thumbnails.length > 0">
        <mat-grid-list role="list" cols="15" rowHeight="1:1" fxHide fxShow.gt-lg
            style="overflow: auto; min-height:max-content;">
            <mat-grid-tile role="listitem" *ngFor="let thumbnail of thumbnails" fxLayout="column">
                <div *ngIf="thumbnail" fxFill
                    [style.background-image]="'url(data:image/jpeg;base64,' + thumbnail.thumbnail + ')'"
                    [style.background-position]="'center'" [style.background-size]="'cover'" fxLayout="column"
                    fxLayoutAlign="space-between center" (click)="openItem(thumbnail._id)">
                    <div></div>
                    <div *ngIf="thumbnail.MIMEType.startsWith('video')" style="color: white; font-weight: bold;">
                        Video
                    </div>
                    <div style="color: white; font-weight: bold;">
                        {{thumbnail.DateTimeOriginal.rawValue.split(' ')[0].replace(':','-').replace(':','-')}}
                    </div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <mat-grid-list role="list" cols="10" rowHeight="1:1" fxHide fxShow.lg
            style="overflow: auto; min-height:max-content;">
            <mat-grid-tile role="listitem" *ngFor="let thumbnail of thumbnails" fxLayout="column">
                <div *ngIf="thumbnail" fxFill
                    [style.background-image]="'url(data:image/jpeg;base64,' + thumbnail.thumbnail + ')'"
                    [style.background-position]="'center'" [style.background-size]="'cover'" fxLayout="column"
                    fxLayoutAlign="space-between center" (click)="openItem(thumbnail._id)">
                    <div></div>
                    <div *ngIf="thumbnail.MIMEType.startsWith('video')" style="color: white; font-weight: bold;">
                        Video
                    </div>
                    <div style="color: white; font-weight: bold;">
                        {{thumbnail.DateTimeOriginal.rawValue.split(' ')[0].replace(':','-').replace(':','-')}}
                    </div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <mat-grid-list role="list" cols="5" rowHeight="1:1" fxHide fxShow.md
            style="overflow: auto; min-height:max-content;">
            <mat-grid-tile role="listitem" *ngFor="let thumbnail of thumbnails" fxLayout="column">
                <div *ngIf="thumbnail" fxFill
                    [style.background-image]="'url(data:image/jpeg;base64,' + thumbnail.thumbnail + ')'"
                    [style.background-position]="'center'" [style.background-size]="'cover'" fxLayout="column"
                    fxLayoutAlign="space-between center" (click)="openItem(thumbnail._id)">
                    <div></div>
                    <div *ngIf="thumbnail.MIMEType.startsWith('video')" style="color: white; font-weight: bold;">
                        Video
                    </div>
                    <div style="color: white; font-weight: bold;">
                        {{thumbnail.DateTimeOriginal.rawValue.split(' ')[0].replace(':','-').replace(':','-')}}
                    </div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <mat-grid-list role="list" cols="3" rowHeight="1:1" fxHide fxShow.sm
            style="overflow: auto; min-height:max-content;">
            <mat-grid-tile role="listitem" *ngFor="let thumbnail of thumbnails" fxLayout="column">
                <div *ngIf="thumbnail" fxFill
                    [style.background-image]="'url(data:image/jpeg;base64,' + thumbnail.thumbnail + ')'"
                    [style.background-position]="'center'" [style.background-size]="'cover'" fxLayout="column"
                    fxLayoutAlign="space-between center" (click)="openItem(thumbnail._id)">
                    <div></div>
                    <div *ngIf="thumbnail.MIMEType.startsWith('video')" style="color: white; font-weight: bold;">
                        Video
                    </div>
                    <div style="color: white; font-weight: bold;">
                        {{thumbnail.DateTimeOriginal.rawValue.split(' ')[0].replace(':','-').replace(':','-')}}
                    </div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <mat-grid-list role="list" cols="2" rowHeight="1:1" fxHide fxShow.lt-sm
            style="overflow: auto; min-height:max-content;">
            <mat-grid-tile role="listitem" *ngFor="let thumbnail of thumbnails" fxLayout="column">
                <div *ngIf="thumbnail" fxFill
                    [style.background-image]="'url(data:image/jpeg;base64,' + thumbnail.thumbnail + ')'"
                    [style.background-position]="'center'" [style.background-size]="'cover'" fxLayout="column"
                    fxLayoutAlign="space-between center" (click)="openItem(thumbnail._id)">
                    <div></div>
                    <div *ngIf="thumbnail.MIMEType.startsWith('video')" style="color: white; font-weight: bold;">
                        Video
                    </div>
                    <div style="color: white; font-weight: bold;">
                        {{thumbnail.DateTimeOriginal.rawValue.split(' ')[0].replace(':','-').replace(':','-')}}
                    </div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
    </div>
    <div class="bottomFixed">
        <mat-progress-bar *ngIf="loading || (thumbnails.length == 0 && listSource.value.length > 0)"
            mode="indeterminate" color="accent"> </mat-progress-bar>
    </div>
</div>

<div style="height: 7em;"></div>
<div style="height: 2em;" fxHide fxShow.lt-sm></div>

<div style="position: fixed; bottom: 1em; left: 1em; right: 1em;" fxLayout="column" fxLayoutAlign="center end"
    fxLayoutAlign.lt-sm="center center">
    <div fxLayout="row wrap" fxLayoutGap="1em" fxLayoutAlign="center center"
        *ngIf="thumbnails.length > 0 && maxPages > 1">
        <button mat-mini-fab color="accent" *ngIf="pageNo > 2" (click)="toPage(1)">1</button>
        <button mat-mini-fab color="accent" [disabled]="pageNo == 1"
            (click)="prevPage()">{{pageNo > 1 ? pageNo - 1 : pageNo}}</button>
        <mat-slider name="pageSlider" color="accent" [disabled]="loading" [max]="maxPages" min="1" [(ngModel)]="pageNo"
            thumbLabel="true" (change)="sliderChanged($event)">
        </mat-slider>
        <button mat-mini-fab color="accent" [disabled]="pageNo == maxPages"
            (click)="nextPage()">{{pageNo < maxPages ? pageNo + 1 : pageNo}}</button>
        <button mat-mini-fab color="accent" *ngIf="pageNo < maxPages - 1"
            (click)="toPage(maxPages)">{{maxPages}}</button>
    </div>
</div>