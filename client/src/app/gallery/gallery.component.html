<div fxLayout="column" fxLayoutGap="1em" style="height: 100%;">
    <mat-card>
        <mat-card-title>{{collection}}</mat-card-title>
        <mat-card-subtitle *ngIf="listSource.value.length == 0">No Items here. There may be no valid items in the
            folder, or
            folder scanning may still be in progress.</mat-card-subtitle>
    </mat-card>
    <div fxLayout="column" fxLayoutGap="1em" *ngIf="thumbnails.length > 0" infiniteScroll
        [infiniteScrollDistance]="50" [infiniteScrollThrottle]="0" (scrolled)="onScroll()">
        <mat-grid-list role="list" cols="15" rowHeight="1:1" fxHide fxShow.gt-lg
            style="overflow: auto; min-height:max-content;">
            <mat-grid-tile role="listitem" *ngFor="let thumbnail of thumbnails" fxLayout="column">
                <div *ngIf="thumbnail" fxFill
                    [style.background-image]="'url(data:image/jpeg;base64,' + thumbnail.thumbnail + ')'"
                    [style.background-position]="'center'" [style.background-size]="'cover'" fxLayout="column"
                    fxLayoutAlign="center center" routerLink="/gallery/{{collection}}/{{thumbnail._id}}">
                    <div *ngIf="thumbnail.MIMEType.startsWith('video')" style="color: white; font-weight: bold;">
                        Play
                    </div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <mat-grid-list role="list" cols="10" rowHeight="1:1" fxHide fxShow.lg
            style="overflow: auto; min-height:max-content;">
            <mat-grid-tile role="listitem" *ngFor="let thumbnail of thumbnails" fxLayout="column">
                <div *ngIf="thumbnail" fxFill
                    [style.background-image]="'url(data:image/jpeg;base64,' + thumbnail.thumbnail + ')'"
                    [style.background-position]="'center'" [style.background-size]="'cover'" fxLayout="column"
                    fxLayoutAlign="space-between center" routerLink="/gallery/{{collection}}/{{thumbnail._id}}">
                    <div></div>
                    <div *ngIf="thumbnail.MIMEType.startsWith('video')" style="color: white; font-weight: bold;">
                        Video
                    </div>
                    <div style="color: white; font-weight: bold;">
                        {{thumbnail.DateTimeOriginal.rawValue.split(' ')[0].replace(':','-').replace(':','-')}}
                    </div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <mat-grid-list role="list" cols="5" rowHeight="1:1" fxHide fxShow.md
            style="overflow: auto; min-height:max-content;">
            <mat-grid-tile role="listitem" *ngFor="let thumbnail of thumbnails" fxLayout="column">
                <div *ngIf="thumbnail" fxFill
                    [style.background-image]="'url(data:image/jpeg;base64,' + thumbnail.thumbnail + ')'"
                    [style.background-position]="'center'" [style.background-size]="'cover'" fxLayout="column"
                    fxLayoutAlign="space-between center" routerLink="/gallery/{{collection}}/{{thumbnail._id}}">
                    <div></div>
                    <div *ngIf="thumbnail.MIMEType.startsWith('video')" style="color: white; font-weight: bold;">
                        Video
                    </div>
                    <div style="color: white; font-weight: bold;">
                        {{thumbnail.DateTimeOriginal.rawValue.split(' ')[0].replace(':','-').replace(':','-')}}
                    </div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <mat-grid-list role="list" cols="3" rowHeight="1:1" fxHide fxShow.sm
            style="overflow: auto; min-height:max-content;">
            <mat-grid-tile role="listitem" *ngFor="let thumbnail of thumbnails" fxLayout="column">
                <div *ngIf="thumbnail" fxFill
                    [style.background-image]="'url(data:image/jpeg;base64,' + thumbnail.thumbnail + ')'"
                    [style.background-position]="'center'" [style.background-size]="'cover'" fxLayout="column"
                    fxLayoutAlign="space-between center" routerLink="/gallery/{{collection}}/{{thumbnail._id}}">
                    <div></div>
                    <div *ngIf="thumbnail.MIMEType.startsWith('video')" style="color: white; font-weight: bold;">
                        Video
                    </div>
                    <div style="color: white; font-weight: bold;">
                        {{thumbnail.DateTimeOriginal.rawValue.split(' ')[0].replace(':','-').replace(':','-')}}
                    </div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <mat-grid-list role="list" cols="2" rowHeight="1:1" fxHide fxShow.lt-sm
            style="overflow: auto; min-height:max-content;">
            <mat-grid-tile role="listitem" *ngFor="let thumbnail of thumbnails" fxLayout="column">
                <div *ngIf="thumbnail" fxFill
                    [style.background-image]="'url(data:image/jpeg;base64,' + thumbnail.thumbnail + ')'"
                    [style.background-position]="'center'" [style.background-size]="'cover'" fxLayout="column"
                    fxLayoutAlign="space-between center" routerLink="/gallery/{{collection}}/{{thumbnail._id}}">
                    <div></div>
                    <div *ngIf="thumbnail.MIMEType.startsWith('video')" style="color: white; font-weight: bold;">
                        Video
                    </div>
                    <div style="color: white; font-weight: bold;">
                        {{thumbnail.DateTimeOriginal.rawValue.split(' ')[0].replace(':','-').replace(':','-')}}
                    </div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
    </div>
    <mat-card *ngIf="loading || (thumbnails.length == 0 && listSource.value.length > 0)">
        <mat-card-subtitle>Please wait...</mat-card-subtitle>
    </mat-card>
    <mat-card *ngIf="thumbnails.length >= listSource.value.length">
        <mat-card-subtitle>End</mat-card-subtitle>
    </mat-card>
</div>